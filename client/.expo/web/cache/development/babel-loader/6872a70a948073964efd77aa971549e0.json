{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport View from \"react-native-web/dist/exports/View\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport React, { useEffect, useState } from 'react';\nimport { EventsData } from \"../../constants\";\nimport EventHeaderSearch from \"./EventHeaderSearch\";\nimport EventCard from \"./EventCard\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\n\nvar EventsFeed = function EventsFeed() {\n  var _useState = useState(EventsData),\n      _useState2 = _slicedToArray(_useState, 2),\n      eventsData = _useState2[0],\n      setEventsData = _useState2[1];\n\n  var _useState3 = useState(EventsData),\n      _useState4 = _slicedToArray(_useState3, 2),\n      prevData = _useState4[0],\n      setPrevData = _useState4[1];\n\n  var _useState5 = useState([]),\n      _useState6 = _slicedToArray(_useState5, 2),\n      dates = _useState6[0],\n      setDates = _useState6[1];\n\n  var _useState7 = useState('Unknown'),\n      _useState8 = _slicedToArray(_useState7, 2),\n      date = _useState8[0],\n      setDate = _useState8[1];\n\n  var handleSearch = function handleSearch(value) {\n    if (value.length === 0) {\n      setEventsData(EventsData);\n    } else {\n      if (date !== 'Unknown') {\n        var filteredData = EventsData.filter(function (item) {\n          return (item.region.toLowerCase().includes(value.toLowerCase()) || item.salle.toLowerCase().includes(value.toLowerCase())) && item.date.toLowerCase().includes(date.toLowerCase());\n        });\n\n        if (filteredData.length === 0) {\n          setEventsData([]);\n        } else {\n          setEventsData(filteredData);\n        }\n      } else {\n        var _filteredData = EventsData.filter(function (item) {\n          return item.region.toLowerCase().includes(value.toLowerCase()) || item.salle.toLowerCase().includes(value.toLowerCase());\n        });\n\n        if (_filteredData.length === 0) {\n          setEventsData([]);\n          setPrevData([]);\n        } else {\n          setEventsData(_filteredData);\n          setPrevData(_filteredData);\n        }\n      }\n    }\n  };\n\n  useEffect(function () {\n    EventsData.map(function (item) {\n      if (!dates.includes(item.date)) {\n        setDates([].concat(_toConsumableArray(dates), [item.date]));\n      }\n    });\n  });\n  useEffect(function () {\n    if (date !== 'Unknown') {\n      var filteredData = prevData.filter(function (item) {\n        return item.date.toLowerCase().includes(date.toLowerCase());\n      });\n      setEventsData(filteredData);\n    }\n\n    if (date === 'Unknown') {\n      setEventsData(prevData);\n    }\n  }, [date]);\n  return _jsxs(View, {\n    style: {\n      height: \"100%\"\n    },\n    children: [_jsx(View, {\n      style: {\n        height: 70\n      }\n    }), _jsx(FlatList, {\n      data: eventsData,\n      renderItem: function renderItem(_ref) {\n        var item = _ref.item;\n        return _jsx(EventCard, {\n          data: item\n        });\n      },\n      keyExtractor: function keyExtractor(item) {\n        return String(item.id);\n      },\n      showsVerticalScrollIndicator: false,\n      ListHeaderComponent: _jsx(EventHeaderSearch, {\n        onSearch: handleSearch,\n        dates: dates,\n        date: date,\n        setDate: setDate\n      }),\n      ListFooterComponent: _jsx(View, {\n        style: {\n          height: 200\n        }\n      })\n    })]\n  });\n};\n\nexport default EventsFeed;","map":{"version":3,"names":["React","useEffect","useState","EventsData","EventHeaderSearch","EventCard","EventsFeed","eventsData","setEventsData","prevData","setPrevData","dates","setDates","date","setDate","handleSearch","value","length","filteredData","filter","item","region","toLowerCase","includes","salle","map","height","String","id"],"sources":["C:/Users/Montassier Paul/Documents/casinow/client/components/EventsScreenCoponents/EventsFeed.tsx"],"sourcesContent":["import { View, FlatList, Text } from 'react-native'\r\nimport React, {useEffect, useState} from 'react'\r\nimport { EventsData } from '../../constants'\r\nimport EventHeaderSearch from './EventHeaderSearch'\r\nimport EventCard from './EventCard'\r\n\r\nconst EventsFeed = () => {\r\n\r\n  const [eventsData, setEventsData] = useState(EventsData)\r\n  const [prevData, setPrevData] = useState(EventsData)\r\n  const [dates, setDates] = useState<string[]>([]);\r\n  const [date, setDate] = useState('Unknown');\r\n\r\n\r\n  const handleSearch = (value : String) => {\r\n\r\n\r\n    if (value.length === 0) {\r\n        setEventsData(EventsData);\r\n    }\r\n\r\n    else {\r\n\r\n      if(date !== 'Unknown'){\r\n        const filteredData = EventsData.filter((item) =>\r\n          (item.region.toLowerCase().includes(value.toLowerCase()) ||\r\n          item.salle.toLowerCase().includes(value.toLowerCase())) &&     \r\n          item.date.toLowerCase().includes(date.toLowerCase())\r\n          \r\n        );\r\n\r\n        if (filteredData.length === 0) {\r\n            setEventsData([]);\r\n        } else {\r\n            setEventsData(filteredData);\r\n        }\r\n      }\r\n      else{\r\n        const filteredData = EventsData.filter((item) =>\r\n          item.region.toLowerCase().includes(value.toLowerCase()) ||\r\n          item.salle.toLowerCase().includes(value.toLowerCase()) \r\n          \r\n        );\r\n\r\n        if (filteredData.length === 0) {\r\n            setEventsData([]);\r\n            setPrevData([]); \r\n        } else {\r\n            setEventsData(filteredData);\r\n            setPrevData(filteredData); \r\n        }\r\n\r\n      }\r\n\r\n    }\r\n  };\r\n\r\n\r\n\r\n  useEffect(()=> {\r\n    EventsData.map((item) => {\r\n        if(!dates.includes(item.date)){\r\n            setDates([...dates, item.date])\r\n\r\n        }\r\n    })\r\n  })\r\n\r\n\r\n  useEffect(() => {\r\n    if (date !== 'Unknown'){\r\n\r\n    const filteredData = prevData.filter((item) =>\r\n      item.date.toLowerCase().includes(date.toLowerCase())\r\n    );\r\n\r\n    setEventsData(filteredData);\r\n\r\n    }\r\n\r\n    if(date === 'Unknown'){\r\n        setEventsData(prevData);\r\n    }\r\n\r\n  }, [date])\r\n\r\n  return (\r\n    <View style={{\r\n        height:\"100%\"\r\n      }}>\r\n\r\n        <View style={{ height: 70}}>\r\n        </View>\r\n        <FlatList\r\n        data={eventsData}\r\n        renderItem={({ item }) => <EventCard data={item}/>}\r\n        keyExtractor={(item) => String(item.id)}\r\n        showsVerticalScrollIndicator={false}\r\n        ListHeaderComponent={<EventHeaderSearch onSearch={handleSearch} dates={dates} date={date} setDate={setDate}/>}\r\n        ListFooterComponent={<View style={{height:200}}/>}\r\n      />\r\n    </View>\r\n  )\r\n}\r\n\r\nexport default EventsFeed\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}